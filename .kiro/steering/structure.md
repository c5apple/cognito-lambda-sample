# プロジェクト構造

## ディレクトリ構成

```
cognito-lambda-sample/
├── handlers/           # Lambda関数ハンドラー
│   ├── login.py       # ユーザー認証エンドポイント
│   ├── logout.py      # セッション終了エンドポイント
│   └── user_info.py   # 保護されたユーザープロファイルエンドポイント
├── utils/             # 共有ユーティリティ
│   ├── auth.py        # トークン検証と抽出
│   └── cognito.py     # Cognito APIクライアントラッパー
├── cli/               # コマンドラインユーティリティ
│   ├── create_user.py # テストユーザー作成ツール
│   └── delete_user.py # テストユーザー削除ツール
├── tests/             # テストスイート
│   ├── unit/          # 個別コンポーネントの単体テスト
│   └── integration/   # エンドツーエンドAPIテスト
├── requirements.txt   # Python依存関係
├── package.json       # 開発ワークフロー用npmスクリプト
├── Dockerfile         # コンテナ定義
├── docker-compose.yml # 開発環境
├── serverless.yml     # デプロイ設定
└── .env.example       # 環境変数テンプレート
```

## コード組織の原則

### ハンドラー関数
- 各APIエンドポイントを個別のLambda関数として実装
- ハンドラーでは最小限のビジネスロジック - utilsに委譲
- 全エンドポイントで一貫したエラーレスポンス形式
- API Gateway統合の処理

### ユーティリティ
- `utils/cognito.py`: エラーハンドリングを含む集約されたCognito API相互作用
- `utils/auth.py`: トークン検証、抽出、認証ヘルパー
- ハンドラー間での重複を避けるための共有コード

### CLIツール
- 開発およびテストワークフロー用の独立したスクリプト
- 一貫したコマンドライン引数解析
- 適切なエラーハンドリングと使用方法の説明
- 使いやすさのためのnpmスクリプトとの統合

### テスト構造
- 個別関数とユーティリティの単体テスト
- 完全な認証フローの統合テスト
- 分離されたテスト用のモックCognitoサービス
- テストデータクリーンアップの自動化

## ファイル命名規則

- PythonファイルとディレクトリにはSnake_caseを使用
- 機能を反映した説明的な名前
- APIエンドポイントにちなんで名付けられたハンドラーファイル
- 責任によってグループ化されたユーティリティファイル
- `test_`プレフィックスでソース構造をミラーするテストファイル